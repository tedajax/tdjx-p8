pico-8 cartridge // http://www.pico-8.com
version 18
__lua__
function _init()
	local cart="wizard.p8"
	
	do_save=true
	
	tmap={
		c=81,
		l=80,
		r=82,
		t=65,
		b=97,
		tl=64,
		tr=66,
		bl=96,
		br=98,
		hc=113,
		hl=112,
		hr=114,
		ctr=83,
		ctl=84,
		cbr=67,
		cbl=68,
	}
	
	-- load cart data
	reload(0x0000,0x0000,0x1000,cart)
	
	masks={
		c=  {0xff,0xff,0xff,0xff,
				   0xff,0xff,0xff,0xff},
		l=  {0x3f,0x3f,0x3f,0x3f,
					  0x3f,0x3f,0x3f,0x3f},
		r=  {0xfc,0xfc,0xfc,0xfc,
					  0xfc,0xfc,0xfc,0xfc},
		t=  {0x00,0x00,0xff,0xff,
				   0xff,0xff,0xff,0xff},
		b=  {0xff,0xff,0xff,0xff,
				   0xff,0xff,0x00,0x00},
		tl= {0x00,0x00,0x3f,0x3f,
					  0x3f,0x3f,0x3f,0x3f},
	 tr= {0x00,0x00,0xfc,0xfc,
	 	 		 0xfc,0xfc,0xfc,0xfc},
	 bl= {0x3f,0x3f,0x3f,0x3f,
	 			  0x3f,0x3f,0x00,0x00},
	 br= {0xfc,0xfc,0xfc,0xfc,
	 				 0xfc,0xfc,0x00,0x00},
	 hc= {0x00,0x00,0xff,0xff,
	 				 0xff,0xff,0x00,0x00},
	 hl= {0x00,0x00,0x3f,0x3f,
	 				 0x3f,0x3f,0x00,0x00},
		hr= {0x00,0x00,0xfc,0xfc,
						 0xfc,0xfc,0x00,0x00},
		ctl={0x3f,0x3f,0xff,0xff,
							0xff,0xff,0xff,0xff},
		ctr={0xfc,0xfc,0xff,0xff,
							0xff,0xff,0xff,0xff},
		cbl={0xff,0xff,0xff,0xff,
							0xff,0xff,0x3f,0x3f},
		cbr={0xff,0xff,0xff,0xff,
							0xff,0xff,0xfc,0xfc},
	}
	
	for k,masks in pairs(masks) do
		local sp_src=tmap.c
		local sp_dst=tmap[k]
		
		for y=0,7 do
			local mask=masks[y+1]
			for x=0,7 do
				if band(mask,shl(1,7-x))~=0 then
					local dx,dy=(sp_dst%16)*8+x,
						flr(sp_dst/16)*8+y
					local sx,sy=(sp_src%16)*8+x,
						flr(sp_src/16)*8+y
					sset(dx,dy,sget(sx,sy))
				end
			end
		end
	end
	
	cstore(0x0000,0x0000,0x1000,cart) 
end

function _draw()
	-- confirm sprite sheet loaded
	cls()
	sspr(0,0,128,128)
end


__gfx__
000000000d22200000000000d22200000000000000000000000000000ffffff000000000000bb000000000000002222000000000000002220000000000000000
00000000002d22d00d22200002d22d000000000000444400000000000f3838f00ffffff000bbbb00000bb0000022ee222222000000222ee22222200000000000
0070070000222440002d22d002224400000000000444440000444400f433334f0f3838f00b3bb3b000bbbb0002eee2eee2ee220002eee2eee2eee20000000000
000770000d49494000222440d494940000000000044b4b0004444400f433334ff433334f0b7bb7b00b3bb3b02eee222e222eee202eee222e222eee2000000000
00077000e7e4447e0d494940e74447e00000000004433300044b4b0034444443f433334f0bb33bb00b7bb7b02eeee28ee28eeee222eee28ee28eee2000000000
007007007eeeeee7e7e4447e7eeeee74000000000ff3ff00044333003444444334444443bbb33bbb0bb33bb02eeeeeeeeeeeeee202eeeeeeeeeeee2000000000
000000004eeeeee47eeeeee7e444ee000000000003fff3000ff3ff000ff00ff0344444430bbbbbb0bbb33bbb02eeee2222eeee202eeeee2222eeee2000000000
00000000eeeeeee04eeeeee4eeeeee000000000000f0f00003fff300033003300ff00ff000b00b000bbbbbb002eee222222eee202eeee222222ee20000000000
55666655dddddddd00000000000000000000000000000000000000009999999999999999999999999999999902eeee2222eeee202eeeee2222eee20000000000
65666656dddddddd00000000000000000000000000000000000000009444444444444449944444444444444902eeeeeeeeeeee202eeeeeeeeeee200000000000
65555556dddddddd000000000000000000000000000000000000000094999994444999999499999444499999002eeeeeeeeeee2002eeeeeeeeeee20000000000
66666666dddddddd000000000000000000000000000000000000000094999944444999999499994444499999002eeeeeeeeee2002eeeeeeeeeeee22000000000
66666666dddddddd000000000000000000000000000000000000000094999999994449499499999aa944494902e2eeeeeeeeee202eeeeeeee2eeeee200000000
65555556dddddddd0000000000000000000000000000000000000000944999444999994994499aa77aa9994902ee2e2eee2e2e202ee2222ee22e22e200000000
65666656dddddddd0cccccc00000000000000000000000000000000094a4994944444a4994a4a778877a4a4922ee2e2eee22e2002e2020eee22e202000000000
55666655ddddddddcccccccc00000000000000000000000000000000944a44444444a949944a77800877a9490e220e0e2202e200020000222002000000000000
0000000990000000000cc000000cc000000c00000000c000000000009494aaaaaaaa4999949a77800877a9990000000000000000000000000000000000000000
000000999900000000cccc00000cc00000cc00000000cc0000000000949449944994499994a4a778877a4a990000000000000000000000000000000000000000
00000999999000000cccccc0000cc0000ccc00000000ccc000000000949949994999444994994aa77aa944490000000000000000000000000000000000000000
0000999999990000cccccccc000cc000cccccccccccccccc0000000094994999499999499499499aa99999490000000000000000000000000000000000000000
0009999999999000000cc000cccccccccccccccccccccccc00000000949949994999994994994999499999490000000000000000000000000000000000000000
0099999999999900000cc0000cccccc00ccc00000000ccc000000000999999999999999999999999999999990000000000000000000000000000000000000000
0999999999999990000cc00000cccc0000cc00000000cc0000000000900900900900900990090090090090090000000000000000000000000000000000000000
9999999999999999000cc000000cc000000c00000000c00000000000a00a00a00a00a00aa00a00a00a00a00a0000000000000000000000000000000000000000
99999999999999996666c70000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
09999999999999906666cc706666c700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00999999999999008566ccc06666cc70000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000999999999900055aa9cc08566ccc0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00009999999900005599995855aa9cc0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000999999000005595555855999958000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000099990000000696666055955558000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000009900000000660066006966660000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
a9999999999999999999999a822882288228822833933b399933993b931b33330000101111010000000010010000000000000000000000000000000000000000
4a99999999999999999999a4222882222228822211b1331b31b44331b13141b30001000000001000000000000000000000000000000000000000000000000000
448888222288882222888844228888222288882203330130b0130130033003301011000000001101100100000000000000000000000000000000000000000000
44888888888888888888884488888888888888880b300033100000001b31b1300000000110000000000000010000000000000000000000000000000000000000
44888888888888888888884488888888888888880131000100000000013310300000101111010000000011010000000000000000000000000000000000000000
448888222288882222888844228888222288882203300000000000000b1330000001000000001000000100000000000000000000000000000000000000000000
442882222228822222288244222882d22d288222001000000000000001001b000001000000001000101100000000000000000000000000000000000000000000
4428822882288228822882448228824dd42882280000000000000000000001000000000110000000000000010000000000000000000000000000000000000000
4428822882288228822882448228824aa42882281111111111111111111111110000111100001111000011110000000000000000000000000000000000000000
442882222228822222288244222882a99a2882221100000000000000000000110001000000010000000100000000000000000000000000000000000000000000
44888822228888222288884422888822228888220110000000000000000001101111000011110000111100000000000000000000000000000000000000000000
44888888888888888888884488888888888888880011100000000000000111000000000100000001000000010000000000000000000000000000000000000000
44888888888888888888884488888888888888880000100000000000000100000000111111111111000011110000000000000000000000000000000000000000
44888822228888222288884422888822228888220000111111111111111100000001111111111000000100000000000000000000000000000000000000000000
44288222222882222228824422288222222882220000100100100100100100001111100000011100111100000000000000000000000000000000000000000000
44288228822882288228824482288228822882280000100100100100100100000011000000001101000000010000000000000000000000000000000000000000
44288228822882288228824400001101000010010000100100100100100100000011000000501111000011110000000000000000000000000000000000000000
44288222222882222228824400010000000100000000100100100100100100000011000000001100000100000000000000000000000000000000000000000000
44888822228888222288884410100000100000000000100100100100100100001111000000001100111100000000000000000000000000000000000000000000
44888888888888888888884400000001000000010000100100100100100100000011000000001101000000000000000000000000000000000000000000000000
44888888888888888888884400001101000010000000100100100100100100000011000000001111000000010000000000000000000000000000000000000000
44888822228888222288884400010000000100000000100100100100100100000011000000001100000100000000000000000000000000000000000000000000
41222222222222222222221401100000100100000000100100100100100100001111111111111100100100000000000000000000000000000000000000000000
12222222222222222222222100000001000000010000100100100100100100000011010110101101000000010000000000000000000000000000000000000000
a9999999999999999999999a00000111000000010000100100100100100100000011010110101111000000000000000000000000000000000000000000000000
4a99999999999999999999a400010000000000000000100100100100100100000011111111111100000000000000000000000000000000000000000000000000
44888822228888222288884410110000100100000000111111111111111100001111111111111100000000000000000000000000000000000000000000000000
44888888888888888888884400000000000000000000100000000000000100000000000100000001000000000000000000000000000000000000000000000000
44888888888888888888884400001101000000010011100000000000000111000000111100001111000000000000000000000000000000000000000000000000
44888822228888222288884400010000000000000110000000000000000001100001000000010000000000000000000000000000000000000000000000000000
41222222222222222222221411100000000100001100000000000000000000111111000011110000000000000000000000000000000000000000000000000000
12222222222222222222222100000001000000011111111111111111111111110000000100000001000000000000000000000000000000000000000000000000
