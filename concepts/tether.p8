pico-8 cartridge // http://www.pico-8.com
version 18
__lua__
#include ../util.p8

function _init()
	plr={
		x=30,y=64,
		r=2,
		dx=0,dy=0
	}
	
	obj={
		x=64,y=64,r=28
	}
	
	dt=0x0000.0888
end

function _update()
	clear_watches()

	local ix,iy=0,0
	
	if (btn(0)) ix-=1
	if (btn(1)) ix+=1
	if (btn(2)) iy-=1
	if (btn(3)) iy+=1

	if ix==0 and iy==0 then
		plr.dx*=0.99
		plr.dy*=0.99
	else
		local l=sqrt(ix*ix+iy*iy)
		local mx,my=ix/l,iy/l
		
		plr.dx+=mx*dt*25
		plr.dy+=my*dt*25
	end
	
	plr.x+=plr.dx*dt
	plr.y+=plr.dy*dt
	
	local dx=plr.x-obj.x
	local dy=plr.y-obj.y
	
	local d=sqrt(dx*dx+dy*dy)
	
	local rsum=plr.r+obj.r
	if d<=rsum then
		local nx,ny=dx/d,dy/d
		plr.x=nx*rsum+obj.x
		plr.y=ny*rsum+obj.y
	end

end

function _draw()
	cls()
	
	circ(plr.x,plr.y,plr.r,12)
	circ(obj.x,obj.y,obj.r,7)
	
	draw_watches()
end
__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
