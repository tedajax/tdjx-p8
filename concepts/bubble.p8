pico-8 cartridge // http://www.pico-8.com
version 16
__lua__
function _init()
	bbl={x=64,y=64,dx=0,dy=0,r=10}
	plr={x=0,y=0,dx=0,dy=0,r=1}
end

function _update()
	local ix,iy=0,0
	
	if (btn(0)) ix-=1
	if (btn(1)) ix+=1
	if (btn(2)) iy-=1
	if (btn(3)) iy+=1
	
	ix,iy=norm(ix,iy)
	
	local acl=0.2
	local mxspd=1

	plr.dx+=ix*acl
	plr.dy+=iy*acl
	
	if mag(plr.dx,plr.dy)>mxspd then
		plr.dx,plr.dy=norm(plr.dx,plr.dy)
		plr.dx*=mxspd
		plr.dy*=mxspd
	end
	
	plr.x+=plr.dx
	plr.y+=plr.dy
	
	if mag(plr.x,plr.y)>bbl.r then
		plr.x,plr.y=norm(plr.x,plr.y)
		
		local ddx,ddy=plr.x,plr.y
		
		plr.x*=bbl.r
		plr.y*=bbl.r
		
		local bblacl=0.1
		ddx*=bblacl
		ddy*=bblacl
		
		bbl.dx+=ddx
		bbl.dy+=ddy
		
		if mag(bbl.dx,bbl.dy)>1 then
			bbl.dx,bbl.dy=norm(bbl.dx,bbl.dy)
		end
		
	end
	
	bbl.x+=bbl.dx
	bbl.y+=bbl.dy

end

function _draw()
	cls()
	
	circfill(bbl.x,bbl.y,bbl.r,1)
	circ(bbl.x+plr.x,
		bbl.y+plr.y,
		plr.r,
		11)
end

function mag(x,y)
	return sqrt(x*x+y*y)
end

function norm(x,y)
	local l=mag(x,y)
	if (l>0) return x/l,y/l
	return 0,0
end
__gfx__
000000000bb0000000baab0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000bbbb00000bbbbbb000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700bbbb000003bbbb3000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000770000bb000000333333000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000033330000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000033330000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000003300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000003300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
