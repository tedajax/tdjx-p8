pico-8 cartridge // http://www.pico-8.com
version 16
__lua__
function _init()
	car={
		throttle=0,
		speed=0,
		max_speed=85,
		accel=200,
		drag=2.4,
	}
end

function _update()
	update(1/30)
end

function update(dt)
	if btn(2) then
		car.throttle=1
	else
		car.throttle=0
	end
	
	car.speed+=car.throttle*dt*car.accel
	car.speed-=car.speed*car.drag*dt
end

function _draw()
	cls()
	
	draw_left(20,20)
	draw_center(0,0)
	draw_right(0,0)
end

function draw_left(x,y)
	local xx=x+54
	local dx=1.8
	local spd=85
	local f=car.speed/car.max_speed
	for yy=y,y+63 do
		local col=3
		if (1-((yy-y)/64)<f) col=11
		line(xx,yy,xx+10,yy,col)
		xx-=dx
		dx*=0.96
		if (yy-y)%7==0 then
			small_num(spd,xx-12,yy,10)
			spd-=10
		end
	end

	local spdstr=tostr(band(car.speed,0xffff))

	for i=0,2 do
		local rx,ry=x+50+i*4,y+54
		rectfill(rx,ry,rx+2,ry+4,4)
	end
	print(spdstr,x+62-#spdstr*4,y+54,10)
	
	rect(x-1,y-1,x+64,y+64,10)
end

function draw_center(x,y)
end

function draw_right(x,y)
end

function small_num(num,x,y,col)
	local xx=x
	local digits,s,n={},{},num
	while n>0 do
		add(s,n%10)
		n=flr(n/10)
	end
	
	local ct=#s
	for i=ct,1,-1 do
		add(digits,s[i])
	end
	
	if (col) pal(7,col)
	for dig in all(digits) do
		spr(16+dig,xx,y)
		xx+=4
	end
	pal()
end
__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
07770000007000000770000007770000007000000777000007770000077700000777000007770000000000000000000000000000000000000000000000000000
07070000007000000007000000070000077000000700000007000000000700000707000007070000000000000000000000000000000000000000000000000000
07070000007000000770000000770000777700000077000007770000007000000777000007770000000000000000000000000000000000000000000000000000
07770000007000000777000007770000007000000777000007770000070000000777000000070000000000000000000000000000000000000000000000000000
