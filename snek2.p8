pico-8 cartridge // http://www.pico-8.com
version 34
__lua__
function _init()
	g={
		snek={tail={},t=0},
		interval=1,
	}
	
	grow(g.snek.tail,5,8,8)
end

function _update()
	local mx,my=0,0
	if (btn(0,0)) mx-=1
	if (btn(1,0)) mx+=1
	if (btn(2,0)) my-=1
	if (btn(3,0)) my+=1
	
	if ((mx~=0 or my~=0) and g.snek.t==0) g.snek.t=g.interval
	
	if g.snek.t>0 then
		g.snek.t-=1/30
		if g.snek.t<=0 then
			g.snek.t+=g.interval
			move(g.snek,mx,my)
		end
	end
end

function _draw()
	cls()
	
	local n=#g.snek.tail
	for i=n,1,-1 do
		local s=g.snek.tail[i]
		local px,py=s.x*8,s.y*8
		spr(16,px,py)
	end
end

function move(snek,mx,my)
	local n=#snek.tail
	for i=n,2,-1 do
		snek.tail[i].x=snek.tail[i-1].x
		snek.tail[i].y=snek.tail[i-1].y
	end
	snek.tail[1].x+=mx
	snek.tail[1].y+=my
end

function grow(tail,ct,x,y)
	local n=#tail
	x=x or tail[n].x
	y=y or tail[n].y
	for i=1,ct do
		add(tail,{id=n+i,x=x,y=y,d=0})
	end
end
__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00bb0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
bbbbb000bbbbbbbb00bbbbbbbbbbbb0000bbbbbb0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
bbbabbb0bbbbbbbb0bbbbbbbbbbbbbb00bbbbbbb0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
bbbbbbbbbbbbbbbb0bbbbbbbbbbbbbb0bbbbbbbb0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
bbbbbbbbbbbbbbbb0bbbbbbbbbbbbbb0bbbbbbbb0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
bbbabbb0bbbbbbbb0bbbbbbbbbbbbbb00bbbbbbb0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
bbbbb000bbbbbbbb0bbbbbbbbbbbbbb000bbbbbb0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00bb0000000000000bbbbbb00bbbbbb0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000bb0000bbbbbb00bbbbbb00bbbbbb00bbbbbb00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00bbbb000bbbbbb00bbbbbbbbbbbbbb00bbbbbb00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00bbbb000bbbbbb00bbbbbbbbbbbbbb00bbbbbb00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0bbbbbb00bbbbbb00bbbbbbbbbbbbbb00bbbbbb00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
bbabbabb0bbbbbb00bbbbbbbbbbbbbb00bbbbbb00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
bbbbbbbb0bbbbbb00bbbbbbbbbbbbbb00bbbbbb00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0bbbbbb00bbbbbb000bbbbbbbbbbbb0000bbbb000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0bbbbbb00bbbbbb00000000000000000000bb0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
